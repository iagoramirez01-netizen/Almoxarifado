<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AlmoxSystem ‚Äî Gest√£o de Almoxarifado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <!-- ========== TELA DE LOGIN ========== -->
  <div id="tela-login" class="tela ativa">
    <div class="login-bg">
      <div class="login-shapes">
        <div class="shape s1"></div>
        <div class="shape s2"></div>
        <div class="shape s3"></div>
      </div>
    </div>
    <div class="login-card">
      <div class="login-logo">
        <span class="logo-icon">‚¨°</span>
        <span class="logo-text">AlmoxSystem</span>
      </div>
      <h1 class="login-title">Bem-vindo de volta</h1>
      <p class="login-sub">Fa√ßa login para acessar o sistema</p>
      <div id="login-erro" class="erro-msg" style="display:none"></div>
      <div class="campo">
        <label>E-mail</label>
        <input type="email" id="login-email" placeholder="seu@email.com" />
      </div>
      <div class="campo">
        <label>Senha</label>
        <input type="password" id="login-senha" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
      </div>
      <button class="btn-primary" onclick="fazerLogin()">Entrar</button>
      <p class="login-footer">Primeiro acesso? <a href="#" onclick="mostrarCadastro()">Criar conta</a></p>
    </div>
  </div>

  <!-- ========== TELA DE CADASTRO ========== -->
  <div id="tela-cadastro" class="tela">
    <div class="login-bg">
      <div class="login-shapes">
        <div class="shape s1"></div>
        <div class="shape s2"></div>
        <div class="shape s3"></div>
      </div>
    </div>
    <div class="login-card">
      <div class="login-logo">
        <span class="logo-icon">‚¨°</span>
        <span class="logo-text">AlmoxSystem</span>
      </div>
      <h1 class="login-title">Criar conta</h1>
      <p class="login-sub">Preencha os dados para se cadastrar</p>
      <div id="cadastro-erro" class="erro-msg" style="display:none"></div>
      <div id="cadastro-ok" class="ok-msg" style="display:none"></div>
      <div class="campo">
        <label>Nome completo</label>
        <input type="text" id="cad-nome" placeholder="Seu nome" />
      </div>
      <div class="campo">
        <label>E-mail</label>
        <input type="email" id="cad-email" placeholder="seu@email.com" />
      </div>
      <div class="campo">
        <label>Senha</label>
        <input type="password" id="cad-senha" placeholder="M√≠nimo 6 caracteres" />
      </div>
      <button class="btn-primary" onclick="fazerCadastro()">Cadastrar</button>
      <p class="login-footer">J√° tem conta? <a href="#" onclick="mostrarLogin()">Fazer login</a></p>
    </div>
  </div>

  <!-- ========== APP PRINCIPAL ========== -->
  <div id="app" class="tela" style="display:none; flex-direction:row;">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <span class="logo-icon">‚¨°</span>
        <span class="logo-text">AlmoxSystem</span>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="nav-item ativo" onclick="irPara('dashboard', this)">
          <span class="nav-icon">‚óà</span> Dashboard
        </a>
        <a href="#" class="nav-item" onclick="irPara('produtos', this)">
          <span class="nav-icon">‚óß</span> Produtos
        </a>
        <a href="#" class="nav-item" onclick="irPara('entrada', this)">
          <span class="nav-icon">‚Üì</span> Entrada
        </a>
        <a href="#" class="nav-item" onclick="irPara('saida', this)">
          <span class="nav-icon">‚Üë</span> Sa√≠da
        </a>
        <a href="#" class="nav-item" onclick="irPara('historico', this)">
          <span class="nav-icon">‚â°</span> Hist√≥rico
        </a>
        <a href="#" class="nav-item" onclick="irPara('relatorios', this)">
          <span class="nav-icon">‚óé</span> Relat√≥rios
        </a>
      </nav>
      <div class="sidebar-footer">
        <div class="user-info">
          <span class="user-avatar" id="user-avatar">U</span>
          <div>
            <div class="user-name" id="user-name">Usu√°rio</div>
            <div class="user-role" id="user-role">operador</div>
          </div>
        </div>
        <button class="btn-logout" onclick="fazerLogout()">Sair</button>
      </div>
    </aside>

    <!-- CONTE√öDO PRINCIPAL -->
    <main class="main-content">

      <!-- DASHBOARD -->
      <section id="sec-dashboard" class="secao ativa">
        <div class="page-header">
          <h2>Dashboard</h2>
          <span class="page-sub">Vis√£o geral do estoque</span>
        </div>
        <div class="cards-grid">
          <div class="card-stat">
            <div class="card-stat-label">Total de Produtos</div>
            <div class="card-stat-value" id="stat-total">‚Äî</div>
          </div>
          <div class="card-stat verde">
            <div class="card-stat-label">Entradas Hoje</div>
            <div class="card-stat-value" id="stat-entradas">‚Äî</div>
          </div>
          <div class="card-stat laranja">
            <div class="card-stat-label">Sa√≠das Hoje</div>
            <div class="card-stat-value" id="stat-saidas">‚Äî</div>
          </div>
          <div class="card-stat vermelho">
            <div class="card-stat-label">Estoque Baixo</div>
            <div class="card-stat-value" id="stat-baixo">‚Äî</div>
          </div>
        </div>
        <div class="tabela-container">
          <div class="tabela-header">
            <h3>‚ö† Produtos com Estoque Baixo</h3>
          </div>
          <table class="tabela">
            <thead>
              <tr><th>C√≥digo</th><th>Produto</th><th>Qtd Atual</th><th>M√≠nimo</th><th>Status</th></tr>
            </thead>
            <tbody id="tabela-baixo-estoque"></tbody>
          </table>
        </div>
      </section>

      <!-- PRODUTOS -->
      <section id="sec-produtos" class="secao">
        <div class="page-header">
          <h2>Produtos</h2>
          <button class="btn-primary small" onclick="abrirModalProduto()">+ Novo Produto</button>
        </div>
        <div class="filtros">
          <input type="text" id="busca-produto" placeholder="Buscar produto..." oninput="buscarProdutos()" />
        </div>
        <div class="tabela-container">
          <table class="tabela">
            <thead>
              <tr><th>C√≥digo</th><th>Nome</th><th>Categoria</th><th>Unidade</th><th>Qtd</th><th>M√≠n.</th><th>A√ß√µes</th></tr>
            </thead>
            <tbody id="tabela-produtos"></tbody>
          </table>
        </div>
      </section>

      <!-- ENTRADA -->
      <section id="sec-entrada" class="secao">
        <div class="page-header">
          <h2>Registrar Entrada</h2>
          <span class="page-sub">Adicione itens ao estoque</span>
        </div>
        <div class="form-card">
          <div class="form-grid">
            <div class="campo">
              <label>Produto *</label>
              <select id="ent-produto">
                <option value="">Selecione um produto...</option>
              </select>
            </div>
            <div class="campo">
              <label>Quantidade *</label>
              <input type="number" id="ent-quantidade" min="1" placeholder="0" />
            </div>
            <div class="campo">
              <label>Fornecedor</label>
              <input type="text" id="ent-fornecedor" placeholder="Nome do fornecedor" />
            </div>
            <div class="campo">
              <label>Motivo / Observa√ß√£o</label>
              <input type="text" id="ent-motivo" placeholder="Ex: Compra mensal" />
            </div>
          </div>
          <div id="entrada-erro" class="erro-msg" style="display:none"></div>
          <div id="entrada-ok" class="ok-msg" style="display:none"></div>
          <button class="btn-primary" onclick="registrarEntrada()">‚úì Registrar Entrada</button>
        </div>
      </section>

      <!-- SA√çDA -->
      <section id="sec-saida" class="secao">
        <div class="page-header">
          <h2>Registrar Sa√≠da</h2>
          <span class="page-sub">Retire itens do estoque</span>
        </div>
        <div class="form-card">
          <div class="form-grid">
            <div class="campo">
              <label>Produto *</label>
              <select id="sai-produto">
                <option value="">Selecione um produto...</option>
              </select>
            </div>
            <div class="campo">
              <label>Quantidade *</label>
              <input type="number" id="sai-quantidade" min="1" placeholder="0" />
            </div>
            <div class="campo">
              <label>Solicitante *</label>
              <input type="text" id="sai-solicitante" placeholder="Nome do solicitante" />
            </div>
            <div class="campo">
              <label>Departamento</label>
              <input type="text" id="sai-departamento" placeholder="Ex: TI, RH, Financeiro" />
            </div>
            <div class="campo">
              <label>Motivo</label>
              <input type="text" id="sai-motivo" placeholder="Motivo da retirada" />
            </div>
          </div>
          <div id="saida-erro" class="erro-msg" style="display:none"></div>
          <div id="saida-ok" class="ok-msg" style="display:none"></div>
          <button class="btn-primary" onclick="registrarSaida()">‚úì Registrar Sa√≠da</button>
        </div>
      </section>

      <!-- HIST√ìRICO -->
      <section id="sec-historico" class="secao">
        <div class="page-header">
          <h2>Hist√≥rico de Movimenta√ß√µes</h2>
        </div>
        <div class="filtros">
          <select id="filtro-tipo" onchange="carregarHistorico()">
            <option value="">Todos os tipos</option>
            <option value="entrada">Entradas</option>
            <option value="saida">Sa√≠das</option>
          </select>
          <input type="date" id="filtro-data-ini" onchange="carregarHistorico()" />
          <input type="date" id="filtro-data-fim" onchange="carregarHistorico()" />
        </div>
        <div class="tabela-container">
          <table class="tabela">
            <thead>
              <tr><th>Data</th><th>Tipo</th><th>Produto</th><th>Qtd</th><th>Solicitante/Fornecedor</th><th>Depto</th></tr>
            </thead>
            <tbody id="tabela-historico"></tbody>
          </table>
        </div>
      </section>

      <!-- RELAT√ìRIOS -->
      <section id="sec-relatorios" class="secao">
        <div class="page-header">
          <h2>Relat√≥rios</h2>
          <span class="page-sub">An√°lise do estoque</span>
        </div>
        <div class="cards-grid relatorio-cards">
          <div class="card-relatorio" onclick="gerarRelatorio('estoque')">
            <div class="rel-icon">‚óß</div>
            <h4>Posi√ß√£o de Estoque</h4>
            <p>Todos os produtos com quantidades atuais</p>
          </div>
          <div class="card-relatorio" onclick="gerarRelatorio('entradas')">
            <div class="rel-icon" style="color:var(--verde)">‚Üì</div>
            <h4>Relat√≥rio de Entradas</h4>
            <p>Hist√≥rico completo de entradas</p>
          </div>
          <div class="card-relatorio" onclick="gerarRelatorio('saidas')">
            <div class="rel-icon" style="color:var(--laranja)">‚Üë</div>
            <h4>Relat√≥rio de Sa√≠das</h4>
            <p>Hist√≥rico completo de sa√≠das</p>
          </div>
          <div class="card-relatorio" onclick="gerarRelatorio('baixo')">
            <div class="rel-icon" style="color:var(--vermelho)">‚ö†</div>
            <h4>Estoque Cr√≠tico</h4>
            <p>Produtos abaixo do m√≠nimo</p>
          </div>
        </div>
        <div id="resultado-relatorio" class="tabela-container" style="display:none; margin-top:2rem;">
          <div class="tabela-header" style="justify-content:space-between;">
            <h3 id="rel-titulo">Relat√≥rio</h3>
            <button class="btn-secondary small" onclick="imprimirRelatorio()">üñ® Imprimir</button>
          </div>
          <div id="rel-conteudo"></div>
        </div>
      </section>

    </main>
  </div>

  <!-- ========== MODAL PRODUTO ========== -->
  <div id="modal-produto" class="modal-overlay" style="display:none">
    <div class="modal-card">
      <div class="modal-header">
        <h3 id="modal-titulo">Novo Produto</h3>
        <button class="modal-fechar" onclick="fecharModalProduto()">‚úï</button>
      </div>
      <div class="form-grid">
        <div class="campo">
          <label>C√≥digo *</label>
          <input type="text" id="prod-codigo" placeholder="Ex: MAT-001" />
        </div>
        <div class="campo">
          <label>Nome *</label>
          <input type="text" id="prod-nome" placeholder="Nome do produto" />
        </div>
        <div class="campo">
          <label>Descri√ß√£o</label>
          <input type="text" id="prod-descricao" placeholder="Descri√ß√£o opcional" />
        </div>
        <div class="campo">
          <label>Categoria</label>
          <input type="text" id="prod-categoria-nome" placeholder="Ex: Papelaria, Limpeza..." />
        </div>
        <div class="campo">
          <label>Unidade *</label>
          <select id="prod-unidade">
            <option value="un">Unidade (un)</option>
            <option value="cx">Caixa (cx)</option>
            <option value="kg">Quilograma (kg)</option>
            <option value="lt">Litro (lt)</option>
            <option value="m">Metro (m)</option>
            <option value="pc">Pe√ßa (pc)</option>
            <option value="rs">Resma (rs)</option>
            <option value="pr">Par (pr)</option>
          </select>
        </div>
        <div class="campo">
          <label>Qtd. Inicial</label>
          <input type="number" id="prod-qtd" min="0" value="0" />
        </div>
        <div class="campo">
          <label>Estoque M√≠nimo</label>
          <input type="number" id="prod-minimo" min="0" value="0" />
        </div>
      </div>
      <input type="hidden" id="prod-id" />
      <div id="prod-erro" class="erro-msg" style="display:none"></div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="fecharModalProduto()">Cancelar</button>
        <button class="btn-primary" onclick="salvarProduto()">Salvar</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
